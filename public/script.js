function init(){initMobileMenu(),initSmoothScroll(),initHeaderScroll(),initFormValidation(),initDiagnostico(),initPlanHighlight(),initAOS(),initCookieConsent()}function initMobileMenu(){const e=document.getElementById("nav-toggle"),t=document.getElementById("nav-menu"),n=document.querySelectorAll(".nav__link");e&&t&&(e.addEventListener("click",function(){e.classList.toggle("active"),t.classList.toggle("active"),document.body.style.overflow=t.classList.contains("active")?"hidden":""}),n.forEach(function(n){n.addEventListener("click",function(){e.classList.remove("active"),t.classList.remove("active"),document.body.style.overflow=""})}),document.addEventListener("click",function(n){const o=t.contains(n.target),i=e.contains(n.target);o||i||!t.classList.contains("active")||(e.classList.remove("active"),t.classList.remove("active"),document.body.style.overflow="")}))}function initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(function(e){e.addEventListener("click",function(e){const t=this.getAttribute("href");if("#"===t||""===t)return;const n=document.querySelector(t);if(n){e.preventDefault();const t=document.querySelector(".header").offsetHeight,o=n.getBoundingClientRect().top+window.pageYOffset-t;window.scrollTo({top:o,behavior:"smooth"})}})})}function initHeaderScroll(){const e=document.getElementById("header");e&&window.addEventListener("scroll",function(){window.pageYOffset>50?e.classList.add("scrolled"):e.classList.remove("scrolled")})}function initFormValidation(){const e=document.getElementById("demo-form");if(!e)return;e.addEventListener("submit",function(t){t.preventDefault(),clearErrors();const n=document.getElementById("nombre"),o=document.getElementById("email"),i=document.getElementById("whatsapp"),r=document.getElementById("empresa");let a=!0;n.value.trim()||(showError(n,"nombre-error","Ingres치 tu nombre"),a=!1),o.value.trim()?isValidEmail(o.value)||(showError(o,"email-error","Ingres치 un email v치lido"),a=!1):(showError(o,"email-error","Ingres치 tu email"),a=!1),i.value.trim()?isValidPhone(i.value)||(showError(i,"whatsapp-error","Ingres치 un n칰mero v치lido"),a=!1):(showError(i,"whatsapp-error","Ingres치 tu WhatsApp"),a=!1),r.value.trim()||(showError(r,"empresa-error","Ingres치 el nombre de tu empresa"),a=!1),a&&handleFormSubmit(e)});e.querySelectorAll("input").forEach(function(e){e.addEventListener("focus",function(){this.parentElement.querySelector(".form-error").textContent=""})})}function showError(e,t,n){const o=document.getElementById(t);o&&(o.textContent=n,e.style.borderColor="#E17055")}function clearErrors(){const e=document.querySelectorAll(".form-error"),t=document.querySelectorAll(".form-group input");e.forEach(function(e){e.textContent=""}),t.forEach(function(e){e.style.borderColor=""})}function isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function isValidPhone(e){return e.replace(/\D/g,"").length>=8}function handleFormSubmit(e){const t=e.querySelector('button[type="submit"]');t.innerHTML;t.disabled=!0,t.innerHTML='\n        <svg class="spinner" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n            <circle cx="12" cy="12" r="10" stroke-dasharray="60" stroke-dashoffset="20">\n                <animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="1s" repeatCount="indefinite"/>\n            </circle>\n        </svg>\n        Enviando...\n    ',setTimeout(function(){e.innerHTML='\n            <div style="text-align: center; padding: 3rem 2rem;">\n                <div style="width: 64px; height: 64px; background: rgba(129, 181, 161, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem;">\n                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#81B5A1" stroke-width="2">\n                        <path d="M20 6L9 17l-5-5"/>\n                    </svg>\n                </div>\n                <h3 style="font-size: 1.5rem; font-weight: 700; color: #293E40; margin-bottom: 0.5rem;">\n                    춰Gracias por tu inter칠s!\n                </h3>\n                <p style="color: #6B7C7F; line-height: 1.6;">\n                    Nos pondremos en contacto dentro de las pr칩ximas 24 horas h치biles.\n                </p>\n            </div>\n        '},1500)}function initDiagnostico(){var e=document.getElementById("diagnostico-btn");e&&e.addEventListener("click",function(){var e=getRadioValue("q1"),t=getRadioValue("q2"),n=getRadioValue("q3"),o=getRadioValue("q4");if(e&&t&&n&&o){var i,r,a={red:3,yellow:2,green:1},c=a[e]+a[t]+a[n]+a[o];c>=10?(i="TAP츼 LA HEMORRAGIA",r="plan-starter"):c>=7?(i="CONSTRU칈 LA M츼QUINA 游댠",r="plan-growth"):(i="DOMIN츼 TU MERCADO 游눑",r="plan-scale");var l=document.getElementById("quiz-result"),s=document.getElementById("quiz-result-plan"),d=document.getElementById("quiz-result-cta");s.textContent=i,d.href="#"+r,l.style.display="block",l.scrollIntoView({behavior:"smooth",block:"center"})}else{document.querySelectorAll(".quiz-question").forEach(function(e,t){var n="q"+(t+1);document.querySelector('input[name="'+n+'"]:checked')||(e.style.border="2px solid #E17055",e.style.borderRadius="12px",e.style.padding="16px",setTimeout(function(){e.style.border="none",e.style.padding="0"},3e3))})}})}function getRadioValue(e){var t=document.querySelector('input[name="'+e+'"]:checked');return t?t.value:null}function initPlanHighlight(){document.querySelectorAll('a[href^="#plan-"]').forEach(function(e){e.addEventListener("click",function(){var e=this.getAttribute("href").substring(1),t=document.getElementById(e);t&&(document.querySelectorAll(".plan-card").forEach(function(e){e.style.boxShadow=""}),setTimeout(function(){t.style.boxShadow="0 0 0 3px #81B5A1, 0 20px 40px rgba(129, 181, 161, 0.3)",setTimeout(function(){t.style.boxShadow=""},3e3)},500))})})}function initAOS(){"undefined"!=typeof AOS&&AOS.init({duration:800,easing:"ease-out-cubic",once:!0,offset:50,disable:!1})}function initCookieConsent(){var e=document.getElementById("cookie-consent");if(e&&!getCookieValue("pymepilot-cookie-consent")){setTimeout(function(){e.style.display="block"},800);var t=document.getElementById("cookie-prefs"),n=document.getElementById("cookie-customize"),o=document.getElementById("cookie-accept"),i=document.getElementById("cookie-reject"),r=document.getElementById("toggle-analytics"),a=document.getElementById("toggle-marketing"),c={essential:!0,analytics:!1,marketing:!1};o.addEventListener("click",function(){saveCookiePrefs({essential:!0,analytics:!0,marketing:!0}),e.style.display="none"}),i.addEventListener("click",function(){saveCookiePrefs({essential:!0,analytics:!1,marketing:!1}),e.style.display="none"}),n.addEventListener("click",function(){"none"===t.style.display?(t.style.display="flex",n.textContent="Guardar Preferencias"):(saveCookiePrefs(c),e.style.display="none")}),r.addEventListener("click",function(){c.analytics=!c.analytics,updateToggle(r,c.analytics)}),a.addEventListener("click",function(){c.marketing=!c.marketing,updateToggle(a,c.marketing)})}}function updateToggle(e,t){var n=e.querySelector(".cookie-banner__toggle-knob");t?(e.className="cookie-banner__toggle cookie-banner__toggle--on",n.className="cookie-banner__toggle-knob cookie-banner__toggle-knob--on"):(e.className="cookie-banner__toggle cookie-banner__toggle--off",n.className="cookie-banner__toggle-knob cookie-banner__toggle-knob--off")}function saveCookiePrefs(e){var t=new Date;t.setTime(t.getTime()+31536e6),document.cookie="pymepilot-cookie-consent="+encodeURIComponent(JSON.stringify(e))+";expires="+t.toUTCString()+";path=/;SameSite=Lax"}function getCookieValue(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));return t?decodeURIComponent(t[2]):null}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",init):init();